<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>RIALO ESCAPE ‚Äî Yuura Slash Mode ‚öîÔ∏è</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: #000;
      height: 100%;
      overflow: hidden;
    }
    #game-container {
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      position: relative;
    }
    .control-btn {
      position: fixed;
      bottom: 30px;
      width: 65px;
      height: 65px;
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 50%;
      color: #0ff;
      font-size: 28px;
      text-align: center;
      line-height: 65px;
      z-index: 2000;
      transition: 0.15s;
    }
    .control-btn:active {
      background: rgba(0,255,255,0.35);
      transform: scale(0.9);
    }
    #btn-left { left: 25px; }
    #btn-right { right: 25px; }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/phaser@3.70.0/dist/phaser.js"></script>
</head>
<body>
  <div id="game-container"></div>
  <div id="btn-left" class="control-btn">‚óÄ</div>
  <div id="btn-right" class="control-btn">‚ñ∂</div>

  <script>
  const config = {
    type: Phaser.AUTO,
    width: window.innerWidth,
    height: window.innerHeight,
    parent: 'game-container',
    physics: { default: 'arcade', arcade: { gravity: { y: 0 } } },
    scene: { preload, create, update }
  };

  let player, bg, logos, scoreText, bgMusic;
  let isSlashing = false;
  let score = 0;
  let moveLeft = false, moveRight = false;
  const SPEED = 260;

  const game = new Phaser.Game(config);

  function preload() {
    this.load.image('bg', 'assets/bg.png');
    this.load.image('logo', 'assets/logo.png');
    this.load.image('player_idle', 'assets/player/player_idle.png');
    this.load.image('player_slash', 'assets/player/player_slash.png');

    this.load.audio('music', 'assets/sound/Chiptronical.ogg');
    this.load.audio('slash', 'assets/sound/energy-slash.wav');
    this.load.audio('overdrive', 'assets/sound/overdrive.wav');
  }

  function create() {
    bg = this.add.tileSprite(0, 0, config.width, config.height, 'bg').setOrigin(0).setScrollFactor(0);

    bgMusic = this.sound.add('music', { loop: true, volume: 0.35 });
    bgMusic.play().catch(()=>{});

    player = this.physics.add.sprite(config.width/2, config.height - 120, 'player_idle').setDepth(5);
    player.setScale(0.45).setCollideWorldBounds(true);

    logos = this.physics.add.group();
    this.time.addEvent({ delay: 900, callback: () => spawnLogo(this), loop: true });

    scoreText = this.add.text(16, 16, 'SCORE: 0', { fontSize: '20px', fill: '#00ffff', fontFamily: 'monospace' });

    // collision
    this.physics.add.overlap(player, logos, (p, l) => {
      handleHit(this, l);
    });

    // controls
    const leftBtn = document.getElementById('btn-left');
    const rightBtn = document.getElementById('btn-right');
    leftBtn.addEventListener('touchstart', () => moveLeft = true);
    leftBtn.addEventListener('touchend', () => moveLeft = false);
    rightBtn.addEventListener('touchstart', () => moveRight = true);
    rightBtn.addEventListener('touchend', () => moveRight = false);

    this.input.keyboard.on('keydown-LEFT', () => moveLeft = true);
    this.input.keyboard.on('keyup-LEFT', () => moveLeft = false);
    this.input.keyboard.on('keydown-RIGHT', () => moveRight = true);
    this.input.keyboard.on('keyup-RIGHT', () => moveRight = false);

    // idle floating animation
    this.tweens.add({
      targets: player,
      y: player.y - 10,
      duration: 1800,
      yoyo: true,
      repeat: -1,
      ease: 'Sine.easeInOut'
    });
  }

  function update() {
    if (moveLeft) player.setVelocityX(-SPEED);
    else if (moveRight) player.setVelocityX(SPEED);
    else player.setVelocityX(0);

    bg.tilePositionY -= 0.4; // background motion
  }

  function spawnLogo(scene) {
    const x = Phaser.Math.Between(50, config.width - 50);
    const logo = logos.create(x, -60, 'logo');
    logo.setVelocityY(Phaser.Math.Between(180, 320));
    logo.setScale(0.45);
  }

  function handleHit(scene, logo) {
    if (isSlashing) return;
    isSlashing = true;

    const slashSound = scene.sound.add('slash', { volume: 0.8 });
    slashSound.play().catch(()=>{});

    const isCritical = Math.random() < 0.1;
    if (isCritical) {
      const overSound = scene.sound.add('overdrive', { volume: 0.9 });
      overSound.play().catch(()=>{});
      scene.cameras.main.flash(120, 255, 200, 100);
    }

    // switch pose
    player.setTexture('player_slash');
    scene.cameras.main.shake(80, 0.004);

    // add score
    const pts = isCritical ? 60 : Phaser.Math.Between(20, 35);
    score += pts;
    scoreText.setText(`SCORE: ${score}${isCritical ? ' ‚ú¶CRIT!‚ú¶' : ''}`);

    scene.time.delayedCall(300, () => {
      player.setTexture('player_idle');
      isSlashing = false;
    });

    logo.destroy();
  }
  </script>
</body>
</html>    this.bg = this.add.image(width/2,height/2,'bg').setDisplaySize(width,height);

    // Player (anjing lo üòé)
    this.player = this.physics.add.sprite(width/2,height*0.85,'player');
    this.player.setDisplaySize(width*0.25,width*0.25);
    this.player.setCollideWorldBounds(true);
    this.player.body.setAllowGravity(false);
    this.player.setDepth(10);

    // Logos
    this.logos = this.physics.add.group();
    this.time.addEvent({
      delay:900, loop:true,
      callback:()=>{
        const x=Phaser.Math.Between(60,width-60);
        const logo=this.logos.create(x,-50,'logo');
        logo.setVelocityY(Phaser.Math.Between(230,300));
        logo.setScale(Phaser.Math.FloatBetween(0.05,0.08));
        logo.setDepth(2);
      }
    });

    // Score & sound
    this.score=0;
    this.scoreText=this.add.text(20,20,'SCORE: 0',{fontSize:'22px',fill:'#00ffff'}).setDepth(20);
    this.slashSound=this.sound.add('slash',{volume:0.7});

    // ‚öîÔ∏è Collision = slash effect + rotation animation
    this.physics.add.overlap(this.player,this.logos,(p,l)=>{
      l.destroy();
      const gain=Phaser.Math.Between(20,35);
      this.score+=gain;
      this.scoreText.setText(`SCORE: ${this.score}`);
      this.slashSound.play();

      // ‚ú® animasi tebasan pedang (rotasi cepat)
      this.tweens.add({
        targets: this.player,
        angle: Phaser.Math.Between(-15,-30), // gerak ke atas kiri
        duration: 100,
        yoyo: true,
        ease: 'Cubic.Out'
      });

      // partikel kecil efek cahaya logo
      const flash = this.add.circle(l.x,l.y,15,0x00ffff,0.6);
      this.tweens.add({
        targets: flash,
        alpha: 0,
        scale: 2,
        duration: 300,
        onComplete:()=>flash.destroy()
      });
    });

    // Kontrol
    const btnSize = width*0.2;
    const btnY = height*0.9;
    this.leftZone=this.add.zone(btnSize/2+30,btnY,btnSize,btnSize)
      .setOrigin(0.5).setInteractive();
    this.rightZone=this.add.zone(width-btnSize/2-30,btnY,btnSize,btnSize)
      .setOrigin(0.5).setInteractive();
    this.add.circle(this.leftZone.x,btnY,btnSize/2,0x00ffff,0.25);
    this.add.circle(this.rightZone.x,btnY,btnSize/2,0x00ffff,0.25);
    this.add.text(this.leftZone.x-15,btnY-15,'‚óÄ',{fontSize:'32px',fill:'#00ffff'});
    this.add.text(this.rightZone.x-15,btnY-15,'‚ñ∂',{fontSize:'32px',fill:'#00ffff'});

    this.moveDir=0;
    const startMove=(dir)=>{this.moveDir=dir;};
    const stopMove=()=>{this.moveDir=0;};

    this.leftZone.on('pointerdown',()=>startMove(-1));
    this.rightZone.on('pointerdown',()=>startMove(1));
    this.leftZone.on('pointerup',stopMove);
    this.rightZone.on('pointerup',stopMove);
    this.leftZone.on('pointerout',stopMove);
    this.rightZone.on('pointerout',stopMove);

    // Keyboard support
    this.input.keyboard.on('keydown-LEFT',()=>startMove(-1));
    this.input.keyboard.on('keydown-RIGHT',()=>startMove(1));
    this.input.keyboard.on('keyup',stopMove);
  }

  update(){
    const speed=400;
    if(this.player&&this.player.body){
      this.player.setVelocityX(this.moveDir*speed);
    }
  }
}

const config={
  type:Phaser.AUTO,
  parent:'game-wrapper',
  backgroundColor:'#000000',
  scale:{
    mode:Phaser.Scale.RESIZE,
    autoCenter:Phaser.Scale.CENTER_BOTH,
    width:window.innerWidth,
    height:window.innerHeight
  },
  physics:{
    default:'arcade',
    arcade:{gravity:{y:0},debug:false}
  },
  scene:[RialoScene]
};

window.addEventListener('load',()=>{
  const game=new Phaser.Game(config);
  window.addEventListener('resize',()=>{
    game.scale.resize(window.innerWidth,window.innerHeight);
  });
});
</script>
</body>
</html>  preload(){
    this.load.image('bg','assets/bg.png');
    this.load.image('player','assets/player.png');
    this.load.image('logo','assets/logo.png');
    this.load.audio('slash','assets/sound/energy-slash.wav');
  }

  create(){
    const { width, height } = this.scale;

    // Background
    this.bg = this.add.image(width/2,height/2,'bg').setDisplaySize(width,height);

    // Player
    this.player = this.physics.add.sprite(width/2,height*0.85,'player');
    this.player.setDisplaySize(width*0.25,width*0.25);
    this.player.setCollideWorldBounds(true);
    this.player.body.setAllowGravity(false);
    this.player.setDepth(10);

    // Falling Logos
    this.logos = this.physics.add.group();
    this.time.addEvent({
      delay:900,
      loop:true,
      callback:()=>{
        const x = Phaser.Math.Between(60,width-60);
        const logo = this.logos.create(x,-50,'logo');
        logo.setVelocityY(Phaser.Math.Between(230,300));
        logo.setScale(Phaser.Math.FloatBetween(0.05,0.08));
        logo.setDepth(2);
      }
    });

    // Score
    this.score = 0;
    this.scoreText = this.add.text(20,20,'SCORE: 0',{fontSize:'22px',fill:'#00ffff'}).setDepth(20);

    // Slash Sound
    this.slashSound = this.sound.add('slash',{volume:0.7});

    // Collision detection
    this.physics.add.overlap(this.player,this.logos,(p,l)=>{
      l.destroy();
      const gain = Phaser.Math.Between(20,35);
      this.score += gain;
      this.scoreText.setText(`SCORE: ${this.score}`);
      this.slashSound.play();
    });

    // === Kontrol virtual ===
    const btnSize = width * 0.2;
    const btnY = height * 0.9;

    this.leftZone = this.add.zone(btnSize/2 + 30, btnY, btnSize, btnSize)
      .setOrigin(0.5)
      .setInteractive({ cursor: 'pointer' });
    this.rightZone = this.add.zone(width - btnSize/2 - 30, btnY, btnSize, btnSize)
      .setOrigin(0.5)
      .setInteractive({ cursor: 'pointer' });

    // Tombol visual
    this.add.circle(this.leftZone.x, btnY, btnSize/2, 0x00ffff, 0.25).setDepth(5);
    this.add.circle(this.rightZone.x, btnY, btnSize/2, 0x00ffff, 0.25).setDepth(5);
    this.add.text(this.leftZone.x - 15, btnY - 15, '‚óÄ', { fontSize: '32px', fill: '#00ffff' }).setDepth(6);
    this.add.text(this.rightZone.x - 15, btnY - 15, '‚ñ∂', { fontSize: '32px', fill: '#00ffff' }).setDepth(6);

    // Gerakan default
    this.moveDir = 0;

    const startMove = (dir) => {
      this.moveDir = dir;
      this.player.setVelocityX(dir * 350);
    };
    const stopMove = () => {
      this.moveDir = 0;
      this.player.setVelocityX(0);
    };

    // Handle tap tombol
    this.leftZone.on('pointerdown',()=>startMove(-1));
    this.rightZone.on('pointerdown',()=>startMove(1));
    this.leftZone.on('pointerup',stopMove);
    this.rightZone.on('pointerup',stopMove);
    this.leftZone.on('pointerout',stopMove);
    this.rightZone.on('pointerout',stopMove);

    // Keyboard fallback
    this.input.keyboard.on('keydown-LEFT',()=>startMove(-1));
    this.input.keyboard.on('keydown-RIGHT',()=>startMove(1));
    this.input.keyboard.on('keyup',stopMove);
  }

  update(){
    // fallback movement
    if(this.moveDir!==0 && this.player){
      this.player.setVelocityX(this.moveDir * 350);
    }
  }
}

const config = {
  type: Phaser.AUTO,
  parent: 'game-wrapper',
  backgroundColor: '#000000',
  scale: {
    mode: Phaser.Scale.RESIZE,
    autoCenter: Phaser.Scale.CENTER_BOTH,
    width: window.innerWidth,
    height: window.innerHeight
  },
  physics: {
    default: 'arcade',
    arcade: { gravity: { y: 0 }, debug: false }
  },
  scene: [RialoScene]
};

window.addEventListener('load',()=>{
  const game = new Phaser.Game(config);
  window.addEventListener('resize',()=>{
    game.scale.resize(window.innerWidth,window.innerHeight);
  });
});
</script>
</body>
</html>  preload() {
    this.load.image('bg','assets/bg.png');
    this.load.image('player','assets/player.png');
    this.load.image('logo','assets/logo.png');
    this.load.audio('slash','assets/sound/energy-slash.wav');
  }

  create() {
    const { width, height } = this.scale;

    // Background
    this.add.image(width/2, height/2, 'bg').setDisplaySize(width, height);

    // Player
    this.player = this.physics.add.sprite(width/2, height*0.85, 'player');
    this.player.setDisplaySize(width*0.25, width*0.25);
    this.player.setCollideWorldBounds(true);
    this.player.body.setAllowGravity(false);

    // Logos
    this.logos = this.physics.add.group();
    this.time.addEvent({
      delay: 900,
      loop: true,
      callback: () => {
        const x = Phaser.Math.Between(60, width - 60);
        const logo = this.logos.create(x, -50, 'logo');
        logo.setVelocityY(Phaser.Math.Between(230, 300));
        logo.setScale(Phaser.Math.FloatBetween(0.05, 0.08));
      }
    });

    // Score
    this.score = 0;
    this.scoreText = this.add.text(20, 20, 'SCORE: 0', {
      fontSize: '22px',
      fill: '#00ffff'
    }).setDepth(10);

    // Sound
    this.slashSound = this.sound.add('slash', { volume: 0.8 });

    // Collision
    this.physics.add.overlap(this.player, this.logos, (p, l) => {
      l.destroy();
      const gain = Phaser.Math.Between(20, 35);
      this.score += gain;
      this.scoreText.setText(`SCORE: ${this.score}`);
      this.slashSound.play();
    });

    // Virtual buttons (di dalam Phaser)
    const btnSize = width * 0.18;
    const btnY = height * 0.9;

    const leftZone = this.add.zone(btnSize/2 + 20, btnY, btnSize, btnSize)
      .setOrigin(0.5)
      .setInteractive({ useHandCursor: true });
    const rightZone = this.add.zone(width - btnSize/2 - 20, btnY, btnSize, btnSize)
      .setOrigin(0.5)
      .setInteractive({ useHandCursor: true });

    // Visual indicator
    const leftCircle = this.add.circle(leftZone.x, btnY, btnSize/2, 0x00ffff, 0.2).setDepth(5);
    const rightCircle = this.add.circle(rightZone.x, btnY, btnSize/2, 0x00ffff, 0.2).setDepth(5);
    this.add.text(leftZone.x - 12, btnY - 12, '‚óÄ', { fontSize: '28px', fill: '#00ffff' });
    this.add.text(rightZone.x - 10, btnY - 12, '‚ñ∂', { fontSize: '28px', fill: '#00ffff' });

    this.moveDir = 0;

    leftZone.on('pointerdown', () => this.moveDir = -1);
    rightZone.on('pointerdown', () => this.moveDir = 1);
    leftZone.on('pointerup', () => this.moveDir = 0);
    rightZone.on('pointerup', () => this.moveDir = 0);
    leftZone.on('pointerout', () => this.moveDir = 0);
    rightZone.on('pointerout', () => this.moveDir = 0);

    // Keyboard
    this.input.keyboard.on('keydown-LEFT',()=>this.moveDir=-1);
    this.input.keyboard.on('keydown-RIGHT',()=>this.moveDir=1);
    this.input.keyboard.on('keyup',()=>this.moveDir=0);
  }

  update() {
    const speed = 400;
    if (this.player && this.player.body) {
      this.player.setVelocityX(this.moveDir * speed);
    }
  }
}

const config = {
  type: Phaser.AUTO,
  parent: 'game-wrapper',
  backgroundColor: '#000',
  scale: {
    mode: Phaser.Scale.RESIZE,
    autoCenter: Phaser.Scale.CENTER_BOTH,
    width: window.innerWidth,
    height: window.innerHeight
  },
  physics: {
    default: 'arcade',
    arcade: { gravity: { y: 0 }, debug: false }
  },
  scene: [RialoScene]
};

window.addEventListener('load', () => {
  const game = new Phaser.Game(config);
  window.addEventListener('resize', () => {
    game.scale.resize(window.innerWidth, window.innerHeight);
  });
});
</script>

</body>
</html>  width: 18vw;
  height: 18vw;
  max-width: 90px;
  max-height: 90px;
  background: rgba(0,255,255,0.15);
  border: 2px solid rgba(0,255,255,0.4);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 7vw;
  color: #00ffff;
  z-index: 999;
  transition: background 0.15s, transform 0.1s;
}
.control-btn:active {
  background: rgba(0,255,255,0.4);
  transform: scale(0.9);
}
#btn-left { left: 6vw; }
#btn-right { right: 6vw; }
</style>

<script src="https://cdn.jsdelivr.net/npm/phaser@3.70.0/dist/phaser.min.js"></script>
</head>
<body>

<div id="game-wrapper"></div>
<div id="btn-left" class="control-btn">‚óÄ</div>
<div id="btn-right" class="control-btn">‚ñ∂</div>

<script>
class RialoScene extends Phaser.Scene {
  constructor() { super('RialoScene'); }

  preload() {
    this.load.image('bg','assets/bg.png');
    this.load.image('player','assets/player.png');
    this.load.image('logo','assets/logo.png');
    this.load.audio('slash','assets/sound/energy-slash.wav');
  }

  create() {
    const { width, height } = this.scale;

    // Background
    this.add.image(width / 2, height / 2, 'bg').setDisplaySize(width, height);

    // Player
    this.player = this.physics.add.sprite(width / 2, height * 0.85, 'player');
    this.player.setDisplaySize(width * 0.25, width * 0.25);
    this.player.setCollideWorldBounds(true);
    this.player.body.setAllowGravity(false);

    // Falling logos
    this.logos = this.physics.add.group();
    this.time.addEvent({
      delay: 900,
      loop: true,
      callback: () => {
        const x = Phaser.Math.Between(60, width - 60);
        const logo = this.logos.create(x, -50, 'logo');
        logo.setVelocityY(Phaser.Math.Between(240, 300));
        logo.setScale(Phaser.Math.FloatBetween(0.05, 0.08));
      }
    });

    // Score
    this.score = 0;
    this.scoreText = this.add.text(20, 20, 'SCORE: 0', {
      fontSize: '22px',
      fill: '#00ffff'
    }).setDepth(99);

    // Sound
    this.slashSound = this.sound.add('slash', { volume: 0.8 });

    // Collision effect
    this.physics.add.overlap(this.player, this.logos, (p, l) => {
      l.destroy();
      const gain = Phaser.Math.Between(20, 35);
      this.score += gain;
      this.scoreText.setText(`SCORE: ${this.score}`);
      this.slashSound.play();
    });

    // Control
    this.moveDir = 0;
    const startMove = (d) => { this.moveDir = d; };
    const stopMove = () => { this.moveDir = 0; };

    const btnL = document.getElementById('btn-left');
    const btnR = document.getElementById('btn-right');

    ['touchstart','mousedown'].forEach(e => {
      btnL.addEventListener(e, () => startMove(-1));
      btnR.addEventListener(e, () => startMove(1));
    });
    ['touchend','mouseup','touchcancel'].forEach(e => {
      btnL.addEventListener(e, stopMove);
      btnR.addEventListener(e, stopMove);
    });

    // Keyboard support
    this.input.keyboard.on('keydown-LEFT', () => this.moveDir = -1);
    this.input.keyboard.on('keydown-RIGHT', () => this.moveDir = 1);
    this.input.keyboard.on('keyup', stopMove);
  }

  update() {
    const speed = 400;
    if (this.player && this.player.body) {
      this.player.setVelocityX(this.moveDir * speed);
    }
  }
}

const config = {
  type: Phaser.AUTO,
  parent: 'game-wrapper',
  backgroundColor: '#000',
  scale: {
    mode: Phaser.Scale.RESIZE,
    autoCenter: Phaser.Scale.CENTER_BOTH,
    width: window.innerWidth,
    height: window.innerHeight
  },
  physics: {
    default: 'arcade',
    arcade: { gravity: { y: 0 }, debug: false }
  },
  scene: [RialoScene]
};

window.addEventListener('load', () => {
  const game = new Phaser.Game(config);
  window.addEventListener('resize', () => {
    game.scale.resize(window.innerWidth, window.innerHeight);
  });
});
</script>

</body>
</html>  display:flex;align-items:center;justify-content:center;
  font-size:7vw;color:#00ffff;
  z-index:9999;
  transition:transform .1s,background .2s;
}
.control-btn:active{
  background:rgba(0,255,255,0.4);
  transform:scale(.9);
}
#btn-left{left:5vw;}
#btn-right{right:5vw;}
</style>
<script src="https://cdn.jsdelivr.net/npm/phaser@3.70.0/dist/phaser.min.js"></script>
</head>
<body>

<div id="game-container"></div>
<div id="btn-left" class="control-btn">‚óÄ</div>
<div id="btn-right" class="control-btn">‚ñ∂</div>

<script>
class RialoScene extends Phaser.Scene {
  constructor(){ super('RialoScene'); }

  preload(){
    this.load.image('bg','assets/bg.png');
    this.load.image('player','assets/player.png');
    this.load.image('logo','assets/logo.png');
    this.load.audio('slash','assets/sound/energy-slash.wav');
  }

  create(){
    const {width,height}=this.scale;

    // BG
    this.bg=this.add.image(width/2,height/2,'bg').setDisplaySize(width,height);

    // Player
    this.player=this.physics.add.sprite(width/2,height*0.85,'player');
    this.player.setDisplaySize(width*0.25,width*0.25);
    this.player.setCollideWorldBounds(true);
    this.player.body.setAllowGravity(false);

    // Logos turun
    this.logos=this.physics.add.group();
    this.time.addEvent({
      delay:900,
      loop:true,
      callback:()=>{
        const x=Phaser.Math.Between(60,width-60);
        const logo=this.logos.create(x,-50,'logo');
        logo.setVelocityY(Phaser.Math.Between(230,300));
        logo.setScale(Phaser.Math.FloatBetween(0.05,0.09));
      }
    });

    // Score
    this.score=0;
    this.scoreText=this.add.text(15,15,'SCORE: 0',{fontSize:'22px',fill:'#00ffff',fontFamily:'monospace'}).setDepth(99);

    // Sound
    this.slashSound=this.sound.add('slash',{volume:0.8});

    // Collision: player vs logo
    this.physics.add.overlap(this.player,this.logos,(p,l)=>{
      l.destroy();
      const gain=Phaser.Math.Between(20,35);
      this.score+=gain;
      this.scoreText.setText(`SCORE: ${this.score} (+${gain})`);
      this.slashSound.play();
    });

    // Control handler
    this.moveDir=0;
    const startMove=(d)=>this.moveDir=d;
    const stopMove=()=>this.moveDir=0;

    const btnL=document.getElementById('btn-left');
    const btnR=document.getElementById('btn-right');

    ['touchstart','mousedown'].forEach(e=>{
      btnL.addEventListener(e,()=>startMove(-1));
      btnR.addEventListener(e,()=>startMove(1));
    });
    ['touchend','mouseup','touchcancel'].forEach(e=>{
      btnL.addEventListener(e,stopMove);
      btnR.addEventListener(e,stopMove);
    });

    // Keyboard
    this.input.keyboard.on('keydown-LEFT',()=>this.moveDir=-1);
    this.input.keyboard.on('keydown-RIGHT',()=>this.moveDir=1);
    this.input.keyboard.on('keyup-LEFT',stopMove);
    this.input.keyboard.on('keyup-RIGHT',stopMove);
  }

  update(){
    const speed=420;
    if(this.player && this.player.body){
      this.player.setVelocityX(this.moveDir*speed);
    }
  }
}

const config={
  type:Phaser.AUTO,
  parent:'game-container',
  backgroundColor:'#000',
  scale:{
    mode:Phaser.Scale.ENVELOP, // full viewport lock
    autoCenter:Phaser.Scale.CENTER_BOTH,
    width:window.innerWidth,
    height:window.innerHeight
  },
  physics:{
    default:'arcade',
    arcade:{gravity:{y:0},debug:false}
  },
  scene:[RialoScene]
};

window.addEventListener('load',()=>{
  const game=new Phaser.Game(config);
  window.addEventListener('resize',()=>{
    game.scale.resize(window.innerWidth,window.innerHeight);
  });
});
</script>

</body>
</html>  width:16vw;height:16vw;
  max-width:90px;max-height:90px;
  background:rgba(0,255,255,0.15);
  border:2px solid rgba(0,255,255,0.4);
  border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  font-size:6vw;color:#00ffff;
  z-index:2000;
  transition:background 0.15s,transform 0.1s;
}
.control-btn:active{
  background:rgba(0,255,255,0.35);
  transform:scale(0.95);
}
#btn-left{left:5vw;}
#btn-right{right:5vw;}
</style>

<script src="https://unpkg.com/phaser@3.70.0/dist/phaser.js"></script>
</head>
<body>

<div id="game-container"></div>
<div id="btn-left" class="control-btn">‚óÄ</div>
<div id="btn-right" class="control-btn">‚ñ∂</div>

<script>
class RialoScene extends Phaser.Scene {
  constructor() {
    super('RialoScene');
  }

  preload() {
    this.load.image('bg', 'assets/bg.png');
    this.load.image('player', 'assets/player.png');
    this.load.image('logo', 'assets/logo.png');
    this.load.audio('slash', 'assets/sound/energy-slash.wav');
  }

  create() {
    const { width, height } = this.scale;

    // Background
    this.bg = this.add.image(width/2, height/2, 'bg').setDisplaySize(width, height);

    // Player
    this.player = this.physics.add.sprite(width/2, height * 0.85, 'player');
    this.player.setDisplaySize(width * 0.25, width * 0.25);
    this.player.setCollideWorldBounds(true);
    this.player.body.setAllowGravity(false);

    // Logos (jatuh)
    this.logos = this.physics.add.group();
    this.time.addEvent({
      delay: 1000,
      callback: () => {
        const x = Phaser.Math.Between(50, width - 50);
        const logo = this.logos.create(x, -50, 'logo');
        logo.setVelocityY(Phaser.Math.Between(250, 320));
        logo.setScale(Phaser.Math.FloatBetween(0.06, 0.10));
      },
      loop: true
    });

    // Score
    this.score = 0;
    this.scoreText = this.add.text(20, 20, 'SCORE: 0', {
      fontSize: '22px',
      fill: '#00ffff',
      fontFamily: 'monospace'
    }).setDepth(100);

    // Audio
    this.slashSound = this.sound.add('slash', { volume: 0.7 });

    // Collider
    this.physics.add.overlap(this.player, this.logos, (player, logo) => {
      this.slashSound.play();
      logo.destroy();
      const gain = Phaser.Math.Between(20, 35);
      this.score += gain;
      this.scoreText.setText(`SCORE: ${this.score} (+${gain})`);
    });

    // Controls
    this.moveDir = 0;
    const startMove = (dir) => this.moveDir = dir;
    const stopMove = () => this.moveDir = 0;

    ['touchstart','mousedown'].forEach(e=>{
      document.getElementById('btn-left').addEventListener(e,()=>startMove(-1));
      document.getElementById('btn-right').addEventListener(e,()=>startMove(1));
    });
    ['touchend','mouseup','touchcancel'].forEach(e=>{
      document.getElementById('btn-left').addEventListener(e,stopMove);
      document.getElementById('btn-right').addEventListener(e,stopMove);
    });

    // Keyboard (PC)
    this.input.keyboard.on('keydown-LEFT',()=>this.moveDir=-1);
    this.input.keyboard.on('keydown-RIGHT',()=>this.moveDir=1);
    this.input.keyboard.on('keyup-LEFT',stopMove);
    this.input.keyboard.on('keyup-RIGHT',stopMove);
  }

  update() {
    const speed = 400;
    if (this.player && this.player.body) {
      this.player.setVelocityX(this.moveDir * speed);
    }
  }
}

const config = {
  type: Phaser.AUTO,
  parent: 'game-container',
  backgroundColor: '#000000',
  scale: {
    mode: Phaser.Scale.FIT,
    autoCenter: Phaser.Scale.CENTER_BOTH,
    width: window.innerWidth,
    height: window.innerHeight
  },
  physics: {
    default: 'arcade',
    arcade: { gravity: { y: 0 }, debug: false }
  },
  scene: [RialoScene]
};

window.addEventListener('load', () => {
  const game = new Phaser.Game(config);
  window.addEventListener('resize', () => {
    game.scale.resize(window.innerWidth, window.innerHeight);
  });
});
</script>

</body>
</html>  border:2px solid rgba(0,255,255,0.4);
  border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  font-size:6vw;color:#00ffff;
  z-index:1000;
  transition:background 0.15s,transform 0.1s;
}
.control-btn:active{
  background:rgba(0,255,255,0.35);
  transform:scale(0.95);
}
#btn-left{left:5vw;}
#btn-right{right:5vw;}
</style>
<script src="https://unpkg.com/phaser@3.70.0/dist/phaser.js"></script>
</head>
<body>
<div id="game-container"></div>
<div id="btn-left" class="control-btn">‚óÄ</div>
<div id="btn-right" class="control-btn">‚ñ∂</div>

<script>
class RialoScene extends Phaser.Scene {
  constructor() { super('RialoScene'); }

  preload() {
    this.load.image('bg', 'assets/bg.png');
    this.load.image('player', 'assets/player.png');
    this.load.image('logo', 'assets/logo.png');
  }

  create() {
    const { width, height } = this.scale;

    // Background
    this.bg = this.add.image(width/2, height/2, 'bg');
    this.bg.setDisplaySize(width, height);

    // Player
    this.player = this.physics.add.sprite(width/2, height*0.85, 'player');
    this.player.setDisplaySize(width*0.3, width*0.3);
    this.player.setCollideWorldBounds(true);
    this.player.body.setAllowGravity(false);

    // Logos jatuh
    this.logos = this.physics.add.group();
    this.time.addEvent({
      delay: 1000,
      callback: () => {
        const x = Phaser.Math.Between(50, width - 50);
        const logo = this.logos.create(x, -50, 'logo');
        logo.setVelocityY(220);
        logo.setScale(Phaser.Math.FloatBetween(0.08, 0.15));
      },
      loop: true
    });

    // Kontrol
    this.moveDir = 0;
    const startMove = (dir) => this.moveDir = dir;
    const stopMove = () => this.moveDir = 0;

    ['touchstart','mousedown'].forEach(e=>{
      document.getElementById('btn-left').addEventListener(e,()=>startMove(-1));
      document.getElementById('btn-right').addEventListener(e,()=>startMove(1));
    });
    ['touchend','mouseup','touchcancel'].forEach(e=>{
      document.getElementById('btn-left').addEventListener(e,stopMove);
      document.getElementById('btn-right').addEventListener(e,stopMove);
    });

    // Keyboard
    this.input.keyboard.on('keydown-LEFT',()=>this.moveDir=-1);
    this.input.keyboard.on('keydown-RIGHT',()=>this.moveDir=1);
    this.input.keyboard.on('keyup-LEFT',stopMove);
    this.input.keyboard.on('keyup-RIGHT',stopMove);
  }

  update() {
    const speed = 400;
    if (this.player && this.player.body) {
      this.player.setVelocityX(this.moveDir * speed);
    }
  }
}

// Game config
const config = {
  type: Phaser.AUTO,
  parent: 'game-container',
  scale: {
    mode: Phaser.Scale.RESIZE,  // üß© auto resize full viewport
    autoCenter: Phaser.Scale.CENTER_BOTH
  },
  width: window.innerWidth,
  height: window.innerHeight,
  backgroundColor: '#000',
  physics: {
    default: 'arcade',
    arcade: { gravity: { y: 0 }, debug: false }
  },
  scene: [RialoScene]
};

window.addEventListener('load', () => {
  const game = new Phaser.Game(config);

  // Responsive resize handler
  window.addEventListener('resize', () => {
    game.scale.resize(window.innerWidth, window.innerHeight);
  });
});
</script>
</body>
</html></style>
<script src="https://unpkg.com/phaser@3.70.0/dist/phaser.js"></script>
</head>
<body>
<div id="game-container"></div>
<div id="btn-left" class="control-btn">‚óÄ</div>
<div id="btn-right" class="control-btn">‚ñ∂</div>

<script>
class RialoScene extends Phaser.Scene {
  constructor() { super('RialoScene'); }

  preload() {
    this.load.image('bg', 'assets/bg.png');
    this.load.image('player', 'assets/player.png');
    this.load.image('logo', 'assets/logo.png');
  }

  create() {
    const { width, height } = this.scale;

    // Background
    this.add.image(width/2, height/2, 'bg').setDisplaySize(width, height);

    // Player
    this.player = this.physics.add.sprite(width/2, height*0.85, 'player');
    this.player.setDisplaySize(width*0.3, width*0.3);
    this.player.setCollideWorldBounds(true);
    this.player.body.setAllowGravity(false);

    // Logos (jatuh)
    this.logos = this.physics.add.group();
    this.time.addEvent({
      delay: 1000,
      callback: () => {
        const x = Phaser.Math.Between(50, width - 50);
        const logo = this.logos.create(x, -50, 'logo');
        logo.setVelocityY(200);
        logo.setScale(Phaser.Math.FloatBetween(0.08, 0.15));
      },
      loop: true
    });

    // Control setup
    this.moveDir = 0;
    const startMove = (dir) => this.moveDir = dir;
    const stopMove = () => this.moveDir = 0;

    // Touch
    ['touchstart','mousedown'].forEach(e=>{
      document.getElementById('btn-left').addEventListener(e,()=>startMove(-1));
      document.getElementById('btn-right').addEventListener(e,()=>startMove(1));
    });
    ['touchend','mouseup','touchcancel'].forEach(e=>{
      document.getElementById('btn-left').addEventListener(e,stopMove);
      document.getElementById('btn-right').addEventListener(e,stopMove);
    });

    // Keyboard
    this.input.keyboard.on('keydown-LEFT',()=>this.moveDir=-1);
    this.input.keyboard.on('keydown-RIGHT',()=>this.moveDir=1);
    this.input.keyboard.on('keyup-LEFT',stopMove);
    this.input.keyboard.on('keyup-RIGHT',stopMove);
  }

  update() {
    const speed = 400;
    if (this.player && this.player.body) {
      this.player.setVelocityX(this.moveDir * speed);
    }
  }
}

const config = {
  type: Phaser.AUTO,
  parent: 'game-container',
  width: window.innerWidth,
  height: window.innerHeight,
  backgroundColor: '#000000',
  physics: { default: 'arcade', arcade: { gravity: { y: 0 }, debug: false } },
  scene: [RialoScene]
};

window.addEventListener('load', () => new Phaser.Game(config));
</script>
</body>
</html>      cursor: pointer;
      transition: background 0.2s;
    }

    button:hover {
      background: #555;
    }
  </style>
</head>
<body>
  <h1>üèôÔ∏è EtherTower - PNG Player Movement Demo</h1>

  <canvas id="gameCanvas" width="800" height="450"></canvas>

  <div id="controls">
    <button id="left">‚¨ÖÔ∏è</button>
    <button id="up">‚¨ÜÔ∏è</button>
    <button id="down">‚¨áÔ∏è</button>
    <button id="right">‚û°Ô∏è</button>
  </div>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    // === Load assets ===
    const bg = new Image();
    bg.src = "assets/bg.png";

    const playerImg = new Image();
    playerImg.src = "assets/player.png";

    const moveSound = new Audio("assets/sound/overdrive.wav");

    // === Player settings ===
    let playerX = 350;
    let playerY = 200;
    const playerSize = 70;
    const speed = 10;

    // === Draw everything ===
    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.drawImage(bg, 0, 0, canvas.width, canvas.height);
      ctx.drawImage(playerImg, playerX, playerY, playerSize, playerSize);
    }

    // === Movement logic ===
    function movePlayer(dx, dy) {
      playerX += dx;
      playerY += dy;

      // Batasi agar tidak keluar canvas
      if (playerX < 0) playerX = 0;
      if (playerY < 0) playerY = 0;
      if (playerX + playerSize > canvas.width)
        playerX = canvas.width - playerSize;
      if (playerY + playerSize > canvas.height)
        playerY = canvas.height - playerSize;

      // mainkan suara gerak
      moveSound.currentTime = 0;
      moveSound.play();

      draw();
    }

    // === Controls ===
    document.getElementById("left").onclick = () => movePlayer(-speed, 0);
    document.getElementById("right").onclick = () => movePlayer(speed, 0);
    document.getElementById("up").onclick = () => movePlayer(0, -speed);
    document.getElementById("down").onclick = () => movePlayer(0, speed);

    // === Keyboard support ===
    document.addEventListener("keydown", (e) => {
      switch (e.key) {
        case "ArrowLeft": movePlayer(-speed, 0); break;
        case "ArrowRight": movePlayer(speed, 0); break;
        case "ArrowUp": movePlayer(0, -speed); break;
        case "ArrowDown": movePlayer(0, speed); break;
      }
    });

    // === Start game when assets loaded ===
    playerImg.onload = () => {
      draw();
    };
  </script>
</body>
</html>


yang ini coba replace kanclass RialoScene extends Phaser.Scene {
  constructor() { super('RialoScene'); }

  preload() {
    this.load.image('bg', 'assets/bg.png');
    this.load.image('player', 'assets/player.png');
    this.load.image('logo', 'assets/logo.png');
  }

  create() {
    const { width, height } = this.scale;
    this.add.image(width/2, height/2, 'bg').setDisplaySize(width, height);

    // Player setup
    this.player = this.physics.add.sprite(width/2, height*0.85, 'player');
    this.player.setCollideWorldBounds(true);
    this.player.setDisplaySize(width*0.28, width*0.28);
    this.player.body.setAllowGravity(false);
    this.player.setDepth(10);

    // Group for falling logos
    this.logos = this.physics.add.group();
    this.time.addEvent({
      delay: 1000,
      callback: () => {
        const x = Phaser.Math.Between(50, width - 50);
        const logo = this.logos.create(x, -50, 'logo');
        logo.setVelocityY(220);
        logo.setScale(Phaser.Math.FloatBetween(0.08, 0.15));
      },
      loop: true
    });

    // Controls
    this.moveDir = 0;

    const startMove = (dir) => this.moveDir = dir;
    const stopMove = () => this.moveDir = 0;

    ['touchstart','mousedown'].forEach(e=>{
      document.getElementById('btn-left').addEventListener(e,()=>startMove(-1));
      document.getElementById('btn-right').addEventListener(e,()=>startMove(1));
    });
    ['touchend','mouseup','touchcancel'].forEach(e=>{
      document.getElementById('btn-left').addEventListener(e,stopMove);
      document.getElementById('btn-right').addEventListener(e,stopMove);
    });

    // Keyboard
    this.input.keyboard.on('keydown-LEFT',()=>this.moveDir=-1);
    this.input.keyboard.on('keydown-RIGHT',()=>this.moveDir=1);
    this.input.keyboard.on('keyup-LEFT',stopMove);
    this.input.keyboard.on('keyup-RIGHT',stopMove);
  }

  update() {
    const speed = 350;
    if (!this.player?.body) return;
    this.player.setVelocityX(this.moveDir * speed);
  }
}

// Config
const config = {
  type: Phaser.AUTO,
  parent: 'game-container',
  width: window.innerWidth,
  height: window.innerHeight,
  backgroundColor: '#000000',
  physics: { default: 'arcade', arcade: { gravity: { y: 0 }, debug: false } },
  scene: [RialoScene]
};

window.addEventListener('load', () => new Phaser.Game(config));
</script>
</body>
</html></style>
<script src="https://unpkg.com/phaser@3.70.0/dist/phaser.js"></script>
</head>
<body>
<div id="game-container"></div>
<div id="btn-left" class="control-btn">‚óÄ</div>
<div id="btn-right" class="control-btn">‚ñ∂</div>

<script>
let moveDir = 0;

function startGame(){
  const WIDTH = window.innerWidth;
  const HEIGHT = window.innerHeight;
  const config = {
    type: Phaser.AUTO,
    parent: 'game-container',
    width: WIDTH,
    height: HEIGHT,
    scale: { mode: Phaser.Scale.FIT, autoCenter: Phaser.Scale.CENTER_BOTH },
    backgroundColor: '#000000',
    physics: { default: 'arcade', arcade: { gravity: { y: 0 }, debug: false } },
    scene: { preload, create, update }
  };
  const game = new Phaser.Game(config);
  let player, logos;

  function preload(){
    this.load.image('bg', 'assets/bg.png');
    this.load.image('player', 'assets/player.png');
    this.load.image('logo', 'assets/logo.png');
  }

  function create(){
    const scene = this;
    scene.add.image(WIDTH/2, HEIGHT/2, 'bg').setDisplaySize(WIDTH, HEIGHT);

    player = scene.physics.add.sprite(WIDTH/2, HEIGHT*0.85, 'player');
    player.setCollideWorldBounds(true);
    player.setDisplaySize(WIDTH * 0.3, WIDTH * 0.3);
    player.body.setAllowGravity(false);

    // Simple movement event (touch)
    const btnLeft = document.getElementById('btn-left');
    const btnRight = document.getElementById('btn-right');

    const startMove = dir => moveDir = dir;
    const stopMove = () => moveDir = 0;

    ['touchstart','mousedown'].forEach(e=>{
      btnLeft.addEventListener(e,()=>startMove(-1));
      btnRight.addEventListener(e,()=>startMove(1));
    });
    ['touchend','mouseup','touchcancel'].forEach(e=>{
      btnLeft.addEventListener(e,stopMove);
      btnRight.addEventListener(e,stopMove);
    });

    // Keyboard
    scene.input.keyboard.on('keydown-LEFT',()=>moveDir=-1);
    scene.input.keyboard.on('keydown-RIGHT',()=>moveDir=1);
    scene.input.keyboard.on('keyup-LEFT',stopMove);
    scene.input.keyboard.on('keyup-RIGHT',stopMove);

    // Group of falling logos
    logos = scene.physics.add.group();
    scene.time.addEvent({
      delay: 1000,
      callback: () => {
        const x = Phaser.Math.Between(50, WIDTH - 50);
        const logo = logos.create(x, -50, 'logo');
        logo.setVelocityY(200);
        logo.setScale(Phaser.Math.FloatBetween(0.08, 0.15));
      },
      loop: true
    });

    // Collision effect (just remove)
    scene.physics.add.overlap(player, logos, (pl, logo)=>{
      logo.destroy();
    });
  }

  function update(){
    if (!player) return;
    const speed = 300;
    player.setVelocityX(moveDir * speed);
  }
}

window.onload = startGame;
</script>
</body>
</html>  z-index:2000;
  transition:background 0.15s,transform 0.1s;
}
.control-btn:active{
  background:rgba(0,255,255,0.35);
  transform:scale(0.95);
}
#btn-left{left:20px;}
#btn-right{right:20px;}
</style>
<script src="https://cdn.jsdelivr.net/npm/phaser@3.70.0/dist/phaser.js"></script>
</head>
<body>
<div id="boot-screen">
  <img id="boot-logo" src="assets/logo.png" alt="RIALO Logo">
  <div id="boot-text">RIALO SYSTEM v3.1<br><span class="small">BOOTING... YUURA [ONLINE]</span></div>
</div>
<div id="game-container"></div>
<div id="btn-left" class="control-btn">‚óÄ</div>
<div id="btn-right" class="control-btn">‚ñ∂</div>

<script>
const bootSound = new Audio('assets/sound/boot-startup.mp3');
bootSound.volume = 0.6; bootSound.play().catch(()=>{});
const bootTextEl = document.getElementById('boot-text');
let dots=0;
const bootInterval=setInterval(()=>{dots=(dots+1)%4;
  bootTextEl.innerHTML='RIALO SYSTEM v3.1<br><span class="small">BOOTING'+'.'.repeat(dots)+'</span>';
},360);
setTimeout(()=>{
  clearInterval(bootInterval);
  const bs=document.getElementById('boot-screen');
  bs.style.opacity=0;
  setTimeout(()=>{bs.style.display='none';startGame();},800);
},2400);

function startGame(){
  const WIDTH=window.innerWidth;
  const HEIGHT=window.innerHeight;
  const config={
    type:Phaser.AUTO,parent:'game-container',width:WIDTH,height:HEIGHT,
    scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},
    backgroundColor:'#000',
    physics:{default:'arcade',arcade:{gravity:{y:0},debug:false}},
    scene:{preload,create,update}
  };
  const game=new Phaser.Game(config);
  let player,logos,scoreText,criticalText,bgTile;
  let moveDir=0,score=0,combo=0,overdrive=false;

  function preload(){
    this.load.image('bg','assets/bg.png');
    this.load.image('logo','assets/logo.png');
    this.load.image('player','assets/player.png');
    this.load.audio('music','assets/sound/Chiptronical.ogg');
    this.load.audio('slash','assets/sound/energy-slash.wav');
    this.load.audio('crash','assets/sound/car-crash-into-wall-heavy-smartsound-fx-1-00-06.mp3');
    this.load.audio('overdrive','assets/sound/overdrive.wav');
  }

  function create(){
    const scene=this;
    bgTile=scene.add.tileSprite(0,0,config.width,config.height,'bg').setOrigin(0).setDepth(0);

    // Player
    player=scene.physics.add.sprite(config.width/2,config.height*0.85,'player');
    player.setDepth(6);
    player.setDisplaySize(config.width*0.3,config.width*0.3);
    player.setCollideWorldBounds(true);
    player.body.setAllowGravity(false);
    player.setVelocityX(0);

    // Groups
    logos=scene.physics.add.group();
    scene.time.addEvent({delay:900,callback:()=>spawnLogo(scene),loop:true});

    // Sounds
    const slashSound=scene.sound.add('slash',{volume:0.9});
    const crashSound=scene.sound.add('crash',{volume:0.7});
    const overdriveSound=scene.sound.add('overdrive',{volume:0.8,loop:true});
    const bgMusic=scene.sound.add('music',{volume:0.4,loop:true});
    bgMusic.play().catch(()=>{});

    // Particles
    const cutParticles=scene.add.particles('logo');
    const emitter=cutParticles.createEmitter({
      lifespan:{min:200,max:400},speed:{min:200,max:400},
      scale:{start:0.3,end:0},gravityY:400,blendMode:'ADD',quantity:10,on:false
    });

    scoreText=scene.add.text(14,14,'SCORE: 0',{fontSize:20,fill:'#00ffff'}).setDepth(10);
    criticalText=scene.add.text(config.width/2,config.height/2,'CRITICAL HIT!',
      {fontSize:40,fill:'#ff0066',fontStyle:'bold'}).setOrigin(0.5).setAlpha(0).setDepth(20);

    // Touch Controls
    const startMove=(d)=>{moveDir=d;};
    const stopMove=()=>{moveDir=0;};
    ['touchstart','mousedown'].forEach(e=>{
      document.getElementById('btn-left').addEventListener(e,()=>startMove(-1));
      document.getElementById('btn-right').addEventListener(e,()=>startMove(1));
    });
    ['touchend','mouseup','mouseleave','touchcancel'].forEach(e=>{
      document.getElementById('btn-left').addEventListener(e,stopMove);
      document.getElementById('btn-right').addEventListener(e,stopMove);
    });

    // Keyboard Controls
    scene.input.keyboard.on('keydown-LEFT',()=>moveDir=-1);
    scene.input.keyboard.on('keydown-RIGHT',()=>moveDir=1);
    scene.input.keyboard.on('keyup-LEFT',stopMove);
    scene.input.keyboard.on('keyup-RIGHT',stopMove);

    // Collider
    scene.physics.add.overlap(player,logos,(pl,logo)=>{
      if(!logo.active)return;
      emitter.emitParticleAt(logo.x,logo.y);
      slashSound.play().catch(()=>{});
      crashSound.play({volume:0.5}).catch(()=>{});
      let gain=Phaser.Math.Between(20,35);
      const isCrit=Phaser.Math.Between(1,8)===1;
      if(isCrit){gain*=2;showCritical(scene,criticalText);}
      score+=gain;combo++;
      scoreText.setText(`SCORE: ${score}  (+${gain})${combo>1?'  COMBO x'+combo:''}`);
      if(!overdrive&&combo>=15){activateOverdrive(scene,overdriveSound);}
      logo.destroy();
    });
  }

  function update(){
    bgTile.tilePositionY -= overdrive ? 2 : 1;
    if(player && player.body){
      const speed = 400;
      player.setVelocityX(moveDir * speed);
    }
  }

  function spawnLogo(scene){
    const x=Phaser.Math.Between(60,scene.scale.width-60);
    const l=logos.create(x,-60,'logo');
    l.setVelocityY(Phaser.Math.Between(240,380));
    l.setScale(Phaser.Math.FloatBetween(0.10,0.15));
    l.setDepth(4);
    l.setAngularVelocity(Phaser.Math.Between(-40,40));
    l.setTint(Phaser.Utils.Array.GetRandom([0x9f00ff,0x0099ff,0xffffff,0xff0066,0x00ffff]));
  }

  function showCritical(scene,text){
    text.setAlpha(1).setScale(1.2);
    scene.tweens.add({targets:text,alpha:{from:1,to:0},scale:{from:1.2,to:0.8},duration:600,ease:'Quad.easeOut'});
  }

  function activateOverdrive(scene,overdriveSound){
    overdrive=true; overdriveSound.play().catch(()=>{});
    scene.cameras.main.flash(100,150,40,255);
    scene.time.addEvent({delay:8000,callback:()=>{
      overdrive=false;overdriveSound.stop();
      scene.cameras.main.flash(200,0,200,255);
    }});
  }
}
</script>
</body>
</html>
